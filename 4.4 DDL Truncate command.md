# ğŸ“˜ TRUNCATE Command â€“ SQL Server (SSMS)

---

## 1ï¸âƒ£ What is TRUNCATE Command?

`TRUNCATE TABLE` is a **DDL command** used to **remove all rows from a table instantly** while **keeping the table structure intact**.

<br>> âœ” Removes **data only**
<br>> âœ” Keeps **table, columns, constraints**
<br>> âŒ Cannot remove selected rows

---

## 2ï¸âƒ£ Why TRUNCATE is Used in SSMS?

TRUNCATE is used when:

* Entire table data must be cleared
* Table structure should remain
* Faster execution is required
* Resetting data during testing
* Clearing staging / temporary tables

âš ï¸ TRUNCATE is **destructive** and **cannot be rolled back**.

---

## 3ï¸âƒ£ What Can Be TRUNCATEd?

| Object    | Allowed |
| --------- | ------- |
| TABLE     | âœ… Yes   |
| DATABASE  | âŒ No    |
| VIEW      | âŒ No    |
| PROCEDURE | âŒ No    |
| FUNCTION  | âŒ No    |

ğŸ‘‰ TRUNCATE works **ONLY on tables**

---

## 4ï¸âƒ£ TRUNCATE TABLE

### ğŸ”¹ Purpose

Remove **all rows** from a table without deleting its structure.

---

### ğŸ”¹ Syntax (SSMS)

```sql
TRUNCATE TABLE table_name;
GO
```

---

### ğŸ”¹ Example

```sql
TRUNCATE TABLE Students;
GO
```

---

### ğŸ”¹ What happens internally in SQL Server

* SQL Server **deallocates data pages**
* No row-by-row logging
* Table definition remains
* Table becomes empty instantly
* IDENTITY value resets

---

## 5ï¸âƒ£ TRUNCATE vs DELETE (SSMS Interview Favorite)

| TRUNCATE         | DELETE                |
| ---------------- | --------------------- |
| DDL              | DML                   |
| Removes all rows | Removes selected rows |
| Very fast        | Slow                  |
| Auto-commit      | Can rollback          |
| Resets IDENTITY  | Does not reset        |
| No WHERE clause  | WHERE allowed         |

---

## 6ï¸âƒ£ TRUNCATE vs DROP (Very Important)

| TRUNCATE          | DROP              |
| ----------------- | ----------------- |
| Removes data      | Removes table     |
| Structure remains | Structure removed |
| Table usable      | Table gone        |
| Medium risk       | High risk         |

---

## TRUNCATE Restrictions (SSMS Rules)

TRUNCATE **CANNOT** be used if:

* Table has **FOREIGN KEY reference**
* Table is referenced by **another table**
* Table participates in **replication**
* Table has **indexed views**
* You donâ€™t have **ALTER permission**

---

## Permissions Required

| Command  | Required Permission |
| -------- | ------------------- |
| DELETE   | DELETE              |
| TRUNCATE | ALTER               |

ğŸ‘‰ TRUNCATE needs **higher permission** than DELETE.

---

## TRUNCATE with Safety Check (SSMS)

```sql
IF OBJECT_ID('Students', 'U') IS NOT NULL
BEGIN
    TRUNCATE TABLE Students;
END
GO
```

âœ” Prevents runtime errors
âœ” Used in deployment scripts

---

## 1ï¸âƒ£1ï¸âƒ£ TRUNCATE and TRANSACTIONS (Tricky)

```sql
BEGIN TRAN;
TRUNCATE TABLE Students;
ROLLBACK;
```

âœ… Data WILL be restored

ğŸ‘‰ In SQL Server, TRUNCATE TABLE does NOT ignore transactions.
If it is executed inside an explicit transaction, it can be rolled back.

---

## 1ï¸âƒ£2ï¸âƒ£ TRUNCATE and TRIGGERS

* TRUNCATE **does NOT fire DELETE triggers**
* DELETE triggers are skipped completely

---

## 1ï¸âƒ£3ï¸âƒ£ Real-Time Usage of TRUNCATE (Projects)

* Clearing **staging tables** (ETL)
* Resetting **test data**
* Performance-sensitive cleanup
* Daily batch refresh jobs

---

## 1ï¸âƒ£4ï¸âƒ£ Common TRUNCATE Errors (SSMS)

* `Cannot truncate table because it is referenced by a FOREIGN KEY`
* `Permission denied`
* `Object does not exist`
* `Table is in use`

---

## 1ï¸âƒ£5ï¸âƒ£ DROP vs TRUNCATE vs DELETE (Final Interview Table)

| Feature              | DELETE | TRUNCATE  | DROP |
| -------------------- | ------ | --------- | ---- |
| Removes rows         | âœ…      | âœ…         | âœ…    |
| Removes structure    | âŒ      | âŒ         | âœ…    |
| WHERE clause         | âœ…      | âŒ         | âŒ    |
| Speed                | Slow   | Very fast | Fast |
| Transaction rollback | âœ…      | âœ…         | âŒ    |
| Identity reset       | âŒ      | âœ…         | âŒ    |
| Triggers fired       | âœ…      | âŒ         | âŒ    |

---

## ğŸ§  One-Line Memory

> **DROP removes structure, TRUNCATE removes all data, DELETE removes selected data**

