# ðŸ“˜ WHERE CLAUSE

## SQL Server (SSMS)

---

## 1ï¸âƒ£ What is WHERE Clause?

The **WHERE clause** is used to **filter rows** from a table based on one or more conditions.

ðŸ‘‰ It works on **individual records (rows)**
ðŸ‘‰ It returns only rows that satisfy the condition
ðŸ‘‰ It is evaluated **before GROUP BY**

---

## 2ï¸âƒ£ Why WHERE Clause is Important?

The WHERE clause is important because it:

* Filters unnecessary data
* Improves query performance
* Applies business rules
* Prevents accidental bulk UPDATE / DELETE
* Reduces result set size

> Without WHERE, SQL processes **all rows**.

---

## 3ï¸âƒ£ WHERE Clause Usage

The WHERE clause can be used with:

* **SELECT**
* **UPDATE**
* **DELETE**
* **MERGE** (inside conditions)

---

## 4ï¸âƒ£ WHERE Clause Syntax

```sql
SELECT column_list
FROM table_name
WHERE condition;
```

---

## 5ï¸âƒ£ Simple WHERE Condition

```sql
SELECT *
FROM tbl_emp
WHERE dept = 'IT';
```

ðŸ“Œ Returns only employees from IT department.

---

## 6ï¸âƒ£ WHERE with Comparison Operators

```sql
SELECT *
FROM tbl_emp
WHERE salary >= 30000;
```

Comparison operators commonly used:

* `=`
* `!=` or `<>`
* `>`
* `<`
* `>=`
* `<=`

---

## 7ï¸âƒ£ WHERE with Logical Operators

### AND

```sql
SELECT *
FROM tbl_emp
WHERE dept = 'IT' AND salary > 30000;
```

### OR

```sql
SELECT *
FROM tbl_emp
WHERE dept = 'IT' OR dept = 'HR';
```

### NOT

```sql
SELECT *
FROM tbl_emp
WHERE NOT dept = 'HR';
```

ðŸ“Œ Use parentheses to control logic.

---

## 8ï¸âƒ£ WHERE with Range Operators

### BETWEEN

```sql
SELECT *
FROM tbl_emp
WHERE salary BETWEEN 20000 AND 40000;
```

âœ” Inclusive of both limits.

---

### NOT BETWEEN

```sql
SELECT *
FROM tbl_emp
WHERE salary NOT BETWEEN 20000 AND 40000;
```

---

### IN

```sql
SELECT *
FROM tbl_emp
WHERE dept IN ('IT', 'HR', 'Finance');
```

---

### NOT IN (âš  NULL trap)

```sql
SELECT *
FROM tbl_emp
WHERE eid NOT IN (1, 2, 3);
```

âŒ If the list contains `NULL`, result may be empty.

---

## 9ï¸âƒ£ WHERE with NULL Values (VERY IMPORTANT)

### âŒ Wrong

```sql
WHERE salary = NULL;
```

### âœ… Correct

```sql
WHERE salary IS NULL;
```

```sql
WHERE salary IS NOT NULL;
```

ðŸ“Œ NULL cannot be compared using `=`.

---

## ðŸ”Ÿ WHERE with LIKE (Pattern Matching)

### Starts with

```sql
WHERE name LIKE 'A%';
```

### Ends with

```sql
WHERE name LIKE '%n';
```

### Contains

```sql
WHERE name LIKE '%ash%';
```

### Single character

```sql
WHERE name LIKE '_a%';
```

---

## 1ï¸âƒ£1ï¸âƒ£ WHERE with Date Values

```sql
SELECT *
FROM tbl_emp
WHERE joining_date >= '2023-01-01';
```

ðŸ“Œ Always use **ISO format (YYYY-MM-DD)** in SQL Server.

---

## 1ï¸âƒ£2ï¸âƒ£ WHERE with Functions

```sql
SELECT *
FROM tbl_emp
WHERE YEAR(joining_date) = 2024;
```

âš  Using functions in WHERE can reduce index usage.

---

## 1ï¸âƒ£3ï¸âƒ£ WHERE with Subquery

```sql
SELECT *
FROM tbl_emp
WHERE dept_id IN (
    SELECT dept_id
    FROM tbl_dept
    WHERE location = 'Hyderabad'
);
```

ðŸ“Œ Subquery must return compatible values.

---

## 1ï¸âƒ£4ï¸âƒ£ WHERE with EXISTS

```sql
SELECT *
FROM tbl_emp e
WHERE EXISTS (
    SELECT 1
    FROM tbl_dept d
    WHERE d.dept_id = e.dept_id
);
```

âœ” Faster than IN for large datasets.

---

## 1ï¸âƒ£5ï¸âƒ£ WHERE with UPDATE (Safety Rule)

```sql
UPDATE tbl_emp
SET salary = salary + 5000
WHERE dept = 'IT';
```

âš  Without WHERE â†’ updates all rows.

---

## 1ï¸âƒ£6ï¸âƒ£ WHERE with DELETE (CRITICAL)

```sql
DELETE FROM tbl_emp
WHERE eid = 10;
```

âš  Always run SELECT before DELETE.

---

## 1ï¸âƒ£7ï¸âƒ£ WHERE vs HAVING (Revisited)

| WHERE           | HAVING          |
| --------------- | --------------- |
| Filters rows    | Filters groups  |
| Before GROUP BY | After GROUP BY  |
| Faster          | Slower          |
| No aggregates   | Uses aggregates |

---

## 1ï¸âƒ£8ï¸âƒ£ WHERE Clause Performance Tips

âœ” Use indexed columns
âœ” Avoid functions on columns
âœ” Filter early (WHERE before GROUP BY)
âœ” Use EXISTS instead of IN for large data
âœ” Avoid `SELECT *`

---

## 1ï¸âƒ£9ï¸âƒ£ Common WHERE Mistakes

âŒ `= NULL` instead of `IS NULL`
âŒ Missing parentheses with AND / OR
âŒ NOT IN with NULL
âŒ Forgetting WHERE in UPDATE / DELETE
âŒ Using HAVING instead of WHERE

---

## 2ï¸âƒ£0ï¸âƒ£ Logical Execution Order (WHERE Focus)

1. FROM
2. **WHERE**
3. GROUP BY
4. HAVING
5. SELECT
6. ORDER BY

---

## ðŸ§  One-Line Memory (Interview Gold)

> **WHERE filters rows before grouping and aggregation.**
